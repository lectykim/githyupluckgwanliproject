<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.5.1/sockjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
    <base href="/">
</head>
<body>

<!-- Sidebar -->
<div class="sidebar">
    <h2>Navigation</h2>
    <div class="sidebar-item" onclick="showMakeButtonForm()">Make Room</div>
    <div th:each="room : ${roomDtoList}" class="sidebar-item" th:onclick="'connectChatting(' + ${room.roomId} + ')'">
        <span th:text="${room.title}"></span>
        <span th:id="'room-'+${room.roomId}" th:text="'('+${room.getNotReadMessageCount()}+')'" class="notification-badge"></span>
    </div>
</div>

<!-- Commit Bar -->
<div class="commit-bar">
    <h2>Commits</h2>
    <ul id="commit-data" class="button-list"></ul>
</div>

<!-- Top Navigation -->
<div class="top-nav">
    <div class="profile">
        <img id="profile-image" src="" alt="Profile Image" class="profile-image">
        <span id="profile-name" class="profile-name"></span>
    </div>
    <div class="nav-buttons">
        <button onclick="openEventModal()" class="nav-button">ðŸ”” Notifications <span id="notification"></span></button>
        <button onclick="window.location.href='/dashboard/mypage'" class="nav-button">My Page</button>
        <button onclick="logout()" class="nav-button">Logout</button>
    </div>
</div>

<!-- Main Content -->
<div class="main-content">
    <button class="create-room-btn" id="createRoomBtn" onclick="showRoomForm()">Create Room</button>

    <!-- Room Creation Form -->
    <div class="room-form" id="roomForm">
        <h2>Create Room</h2>
        <div class="form-group">
            <label for="title">Room Title</label>
            <input type="text" id="title" name="title" placeholder="Enter room title" required>
        </div>
        <div class="form-group">
            <label for="maxMembers">Max Members</label>
            <input type="number" id="maxMembers" name="maxMembers" placeholder="Enter max members" required>
        </div>
        <div class="form-group">
            <label for="repository">Repository</label>
            <input type="text" id="repository" name="repository" placeholder="Target repository" required>
        </div>
        <div class="form-group">
            <label for="owner">Owner</label>
            <input type="text" id="owner" name="owner" placeholder="Repository owner" required>
        </div>
        <button type="submit" onclick="createRoomRequest()" class="submit-btn">Create Room</button>
    </div>

    <!-- Chatting Area -->
    <div class="chatting-area" id="chatting-global-container">
        <div class="file-selector">
            <h2>Select File</h2>
            <ul id="commit-selector"></ul>
        </div>
        <div id="info-data" class="info-message">
            The host will sync branch or commit information.
        </div>
        <div class="commit-chat-container">
            <ul id="commit-editor" class="commit-editor"></ul>
            <div id="chat-container" class="chat-box"></div>
        </div>

        <!-- Button Container -->
        <div class="button-container">
            <button onclick="inviteMember()" class="action-button">Invite Member</button>
            <button onclick="getCurrentMember()" class="action-button">View Members</button>
            <button onclick="gitSetting()" class="action-button">Git Settings</button>
            <button onclick="SyncGitGraph()" class="action-button">Sync Git Log</button>
        </div>

        <!-- Input Container -->
        <div class="input-container">
            <input type="text" id="chat-input" placeholder="Enter your message...">
            <button onclick="sendMessage()" class="send-button">Send</button>
        </div>
    </div>
</div>

<script src="scripts.js"></script>
</body>
</html>
